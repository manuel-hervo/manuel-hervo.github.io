!function(t){function e(t,e,n){["-webkit-","-moz-","-o-","-ms-",""].forEach(function(i){t.css(i+e,n)})}function n(e,n){this._timeouts=[],this.element=t(e),this.options=t.extend({},o,n),this._defaults=o,this._name=i,this.init(),this.hook()}var i="circleMenu",o={depth:0,item_diameter:30,circle_radius:80,angle:{start:0,end:90},speed:500,delay:1e3,step_out:50,step_in:-50,trigger:"click",transition_function:"ease"};n.prototype.init=function(){var e,n=this,o={"bottom-left":[180,90],bottom:[135,45],right:[-45,45],left:[225,135],top:[225,315],"bottom-half":[180,0],"right-half":[-90,90],"left-half":[270,90],"top-half":[180,360],"top-left":[270,180],"top-right":[270,360],full:[-90,270-Math.floor(360/(n.element.children("li").length-1))],"bottom-right":[0,90]};n._state="closed",n.element.addClass(i+"-closed"),"string"==typeof n.options.direction&&(e=o[n.options.direction.toLowerCase()],e&&(n.options.angle.start=e[0],n.options.angle.end=e[1])),n.menu_items=n.element.children("li:not(:first-child)"),n.initCss(),n.item_count=n.menu_items.length,n._step=(n.options.angle.end-n.options.angle.start)/(n.item_count-1),n.menu_items.each(function(e){var o=t(this),s=(n.options.angle.start+n._step*e)*(Math.PI/180),r=Math.round(n.options.circle_radius*Math.cos(s)),a=Math.round(n.options.circle_radius*Math.sin(s));o.data("plugin_"+i+"-pos-x",r),o.data("plugin_"+i+"-pos-y",a),o.on("click",function(){n.select(e+2)})}),["open","close","init","select"].forEach(function(t){var e;n.options[t]&&(e=n.options[t],n.element.on(i+"-"+t,function(){return e.apply(n,arguments)}),delete n.options[t])}),n.submenus=n.menu_items.children("ul"),n.submenus.circleMenu(t.extend({},n.options,{depth:n.options.depth+1})),n.trigger("init")},n.prototype.trigger=function(){var t,e,n=[];for(t=0,e=arguments.length;e>t;t++)n.push(arguments[t]);this.element.trigger(i+"-"+n.shift(),n)},n.prototype.hook=function(){var t=this;"hover"===t.options.trigger?t.element.on("mouseenter",function(){t.open()}).on("mouseleave",function(){t.close()}):"click"===t.options.trigger?t.element.children("li:first-child").on("click",function(e){return e.preventDefault(),"closed"===t._state||"closing"===t._state?t.open():t.close(!0),!1}):"none"===t.options.trigger},n.prototype.open=function(){var n,o=this,s=this.element,r=0;return o.clearTimeouts(),"open"===o._state?o:(s.addClass(i+"-open"),s.removeClass(i+"-closed"),n=o.options.step_out>=0?o.menu_items:t(o.menu_items.get().reverse()),n.each(function(n){var s=t(this);o._timeouts.push(setTimeout(function(){s.css({left:s.data("plugin_"+i+"-pos-x")+"px",top:s.data("plugin_"+i+"-pos-y")+"px"}),e(s,"transform","scale(1)")},r+Math.abs(o.options.step_out)*n))}),o._timeouts.push(setTimeout(function(){"opening"===o._state&&o.trigger("open"),o._state="open"},r+Math.abs(o.options.step_out)*n.length)),o._state="opening",o)},n.prototype.close=function(n){var o=this,s=this.element,r=function(){var n,r=0;return o.submenus.circleMenu("close"),o.clearTimeouts(),"closed"===o._state?o:(n=o.options.step_in>=0?o.menu_items:t(o.menu_items.get().reverse()),n.each(function(n){var i=t(this);o._timeouts.push(setTimeout(function(){i.css({top:0,left:0}),e(i,"transform","scale(.5)")},r+Math.abs(o.options.step_in)*n))}),o._timeouts.push(setTimeout(function(){"closing"===o._state&&o.trigger("close"),o._state="closed"},r+Math.abs(o.options.step_in)*n.length)),s.removeClass(i+"-open"),s.addClass(i+"-closed"),o._state="closing",o)};return n?r():o._timeouts.push(setTimeout(r,o.options.delay)),this},n.prototype.select=function(t){var n,o,s=this;("open"===s._state||"opening"===s._state)&&(s.clearTimeouts(),o=s.element.children("li:not(:nth-child("+t+"),:first-child)"),n=s.element.children("li:nth-child("+t+")"),s.trigger("select",n),e(n.add(o),"transition","all 500ms ease-out"),e(n,"transform","scale(2)"),e(o,"transform","scale(0)"),n.css("opacity","0"),o.css("opacity","0"),s.element.removeClass(i+"-open"),setTimeout(function(){s.initCss()},500))},n.prototype.clearTimeouts=function(){for(var t;t=this._timeouts.shift();)clearTimeout(t)},n.prototype.initCss=function(){var t,n=this;n._state="closed",n.element.removeClass(i+"-open"),n.element.css({"list-style":"none",margin:0,padding:0,width:n.options.item_diameter+"px"}),t=n.element.children("li"),t.attr("style",""),t.css({display:"block",width:n.options.item_diameter+"px",height:n.options.item_diameter+"px","text-align":"center","line-height":n.options.item_diameter+"px",position:"absolute","z-index":1,opacity:""}),n.element.children("li:first-child").css({"z-index":1e3-n.options.depth}),n.menu_items.css({top:0,left:0}),e(t,"border-radius",n.options.item_diameter+"px"),e(n.menu_items,"transform","scale(.5)"),setTimeout(function(){e(t,"transition","all "+n.options.speed+"ms "+n.options.transition_function)},0)},t.fn[i]=function(e){return this.each(function(){var o=t.data(this,"plugin_"+i),s={init:function(){o.init()},open:function(){o.open()},close:function(){o.close(!0)}};"string"==typeof e&&o&&s[e]&&s[e](),o||t.data(this,"plugin_"+i,new n(this,e))})}}(jQuery,window,document);